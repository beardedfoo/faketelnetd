#!/bin/bash

(
	echo "// AUTOGENERATED FILE"
	echo "#include <iostream>"
	echo "#include <map>"
	echo "#include <sstream>"
	echo "#include <string>"
	echo "using namespace std;"
	echo ""
	echo "#include \"TelnetOptions.h\""
	echo ""
	echo "string telnetOptionAsStr( unsigned char c ) {"
	echo "	map<unsigned char,string> strmap;"
		while read x; do
			NAME=$(echo $x | cut -f1 -d',')
			VALUE=$(echo $x | cut -f2 -d',')
			echo "	strmap.insert( pair<unsigned char,string>(${VALUE},\"TELNET_OPTION_${NAME}\") );"
		done < ../telnet_options.txt
	echo ""
	echo "	if( strmap.find(c) != strmap.end() ) {"
	echo "		return strmap[c];"
	echo "	} else {"
	echo "		stringstream ss;"
	echo "		ss << (int)c;"
	echo "		string s;"
	echo "		ss >> s;"
	echo "		return s;"
	echo "	}"
	echo "}"
	echo ""
) > ../TelnetOptions.cpp
